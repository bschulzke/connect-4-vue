(function(){"use strict";var e={3914:function(e,r,t){var o=t(9963),i=t(6252);function n(e,r,t,o,n,a){const l=(0,i.up)("ConnectFour");return(0,i.wg)(),(0,i.j4)(l)}var a=t(3577);const l={href:"https://github.com/bschulzke/connect-4-vue",target:"_blank"},s={class:"options"},p={class:"player-selection"},c={key:0,class:"slider-wrapper"},d=["disabled"],u=(0,i._)("label",{disabled:"true",for:"a1"},"Difficulty",-1),h=["disabled"],y={class:"player-selection"},m={key:0,class:"slider-wrapper"},g=["disabled"],v=(0,i._)("label",{disabled:"true",for:"a1"},"Difficulty",-1),f={class:"loader-wrapper"},w={key:0,class:"throbber-loader"},b={class:"victory-text"},O={class:"connect-four"},k=["onClick"];function C(e,r,t,n,C,P){const T=(0,i.up)("font-awesome-icon"),D=(0,i.up)("ColorPicker"),F=(0,i.up)("PlayerSelector");return(0,i.wg)(),(0,i.iD)("div",{style:(0,a.j5)({"--p1":C.playerOneColor,"--p2":C.playerTwoColor,"--border":P.border,"--green":P.green,"--green-hover":C.greenHover,"--white":C.white,"--overlay":C.overlay,"--grey":C.grey,"--text-color":P.textColor})},[(0,i.Wm)(T,{disabled:!P.humanTurn,role:"button",onClick:P.getHint,icon:"fa-solid fa-lightbulb"},null,8,["disabled","onClick"]),(0,i._)("a",l,[(0,i.Wm)(T,{icon:"fa-brands fa-github"})]),C.playerOneColorPicker||C.playerTwoColorPicker?((0,i.wg)(),(0,i.iD)("div",{key:0,onClick:r[4]||(r[4]=e=>{C.playerOneColorPicker=!1,C.playerTwoColorPicker=!1}),class:"overlay"},[C.playerOneColorPicker?((0,i.wg)(),(0,i.j4)(D,{key:0,colorOptions:P.p1ColorOptions,playerColor:C.playerOneColor,onColor:r[0]||(r[0]=e=>C.playerOneColor=e),onClose:r[1]||(r[1]=e=>C.playerOneColorPicker=!1)},null,8,["colorOptions","playerColor"])):(0,i.kq)("",!0),C.playerTwoColorPicker?((0,i.wg)(),(0,i.j4)(D,{key:1,colorOptions:P.p2ColorOptions,playerColor:C.playerTwoColor,onColor:r[2]||(r[2]=e=>C.playerTwoColor=e),onClose:r[3]||(r[3]=e=>C.playerTwoColorPicker=!1)},null,8,["colorOptions","playerColor"])):(0,i.kq)("",!0)])):(0,i.kq)("",!0),(0,i._)("div",s,[(0,i._)("div",p,[(0,i.Wm)(F,{optionsDisabled:P.optionsDisabled,onInput:r[5]||(r[5]=e=>C.playerOneOption=e)},null,8,["optionsDisabled"]),"AI"===C.playerOneOption?((0,i.wg)(),(0,i.iD)("div",c,[(0,i.wy)((0,i._)("input",{disabled:P.optionsDisabled,"onUpdate:modelValue":r[6]||(r[6]=e=>C.playerOneLevel=e),type:"range",id:"al",name:"a1",min:"0",max:"5"},null,8,d),[[o.nr,C.playerOneLevel]]),u])):(0,i.kq)("",!0)]),(0,i._)("button",{disabled:P.buttonDisabled,class:"button",role:"button",onClick:r[7]||(r[7]=(...e)=>P.startOrRestart&&P.startOrRestart(...e))},(0,a.zw)(P.buttonText),9,h),(0,i._)("div",y,[(0,i.Wm)(F,{optionsDisabled:P.optionsDisabled,onInput:r[8]||(r[8]=e=>C.playerTwoOption=e)},null,8,["optionsDisabled"]),"AI"==C.playerTwoOption?((0,i.wg)(),(0,i.iD)("div",m,[(0,i.wy)((0,i._)("input",{disabled:P.optionsDisabled,"onUpdate:modelValue":r[9]||(r[9]=e=>C.playerTwoLevel=e),type:"range",id:"al",name:"a1",min:"0",max:"5"},null,8,g),[[o.nr,C.playerTwoLevel]]),v])):(0,i.kq)("",!0)])]),(0,i._)("div",f,[C.isLoading||!P.humanTurn&&P.gameStarted&&!P.gameOver?((0,i.wg)(),(0,i.iD)("div",w)):(0,i.kq)("",!0)]),(0,i._)("div",b,(0,a.zw)(P.victoryText),1),(0,i._)("div",O,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(C.game,((e,r)=>((0,i.wg)(),(0,i.iD)("div",{onClick:e=>P.playerMove(r),key:r,id:"col-0",class:(0,a.C_)(["column",{y:P.validateYellow&&P.isValidMove(r)},{r:P.validateRed&&P.isValidMove(r)},{hint:C.hint==r}])},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,class:(0,a.C_)([{p1:1==C.game[r][t],p2:2==C.game[r][t],faded:P.gameOver,"green-border":C.mostRecent[0]==r&&C.mostRecent[1]==t},"circle"])},null,2)))),128))],10,k)))),128))])],4)}t(560);var P=t(7810);const T=["onClick"];function D(e,r,t,n,l,s){const p=(0,i.up)("font-awesome-icon");return(0,i.wg)(),(0,i.iD)("div",{onClick:r[1]||(r[1]=(0,o.iM)((()=>{}),["prevent","stop"])),class:"color-picker"},[(0,i.Wm)(p,{onClick:r[0]||(r[0]=r=>e.$emit("close")),icon:"fa-solid fa-x"}),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.colorOptions,(r=>((0,i.wg)(),(0,i.iD)("div",{key:r,class:(0,a.C_)(["big-tile",{"green-border":r==t.playerColor}]),style:(0,a.j5)({"background-color":r}),onClick:t=>e.$emit("color",r)},null,14,T)))),128))])}var F={name:"ColorPicker",components:{FontAwesomeIcon:P.GN},props:{colorOptions:Array,playerColor:String}},M=t(3744);const S=(0,M.Z)(F,[["render",D]]);var _=S;const W={class:"dropdown-wrapper"},H=["disabled"],L=(0,i._)("option",null,"Human",-1),j=(0,i._)("option",null,"AI",-1),x=[L,j];function I(e,r,t,o,n,a){return(0,i.wg)(),(0,i.iD)("div",W,[(0,i._)("div",{onClick:r[0]||(r[0]=r=>e.$emit("color-picker")),class:"p1-circle small-tile"}),(0,i._)("select",{disabled:t.optionsDisabled,onChange:r[1]||(r[1]=e=>a.handleInput(e))},x,40,H)])}var R={name:"PlayerSelector",prop:["value"],props:{optionsDisabled:Boolean},data(){return{content:this.value}},methods:{handleInput(e){this.$emit("input",e.target.value)}}};const N=(0,M.Z)(R,[["render",I]]);var A=N,V=t(2262);let $=new Worker("agent.js");var q={name:"ConnectFour",components:{FontAwesomeIcon:P.GN,ColorPicker:_,PlayerSelector:A},data(){return{game:[[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0]],redPlayer:!0,mostRecent:[-1,-1],playerOneOption:"Human",playerTwoOption:"AI",isLoading:!1,playerOneLevel:1,playerTwoLevel:1,playerOneColorPicker:!1,playerTwoColorPicker:!1,greenHover:"#50cc9f",white:"#FFFFFF",overlay:"rgba(0, 0, 0, 0.5)",grey:"rgb(157, 157, 157)",playerOneColor:"rgb(255, 45, 45)",playerTwoColor:"rgb(255, 255, 121)",colorOptions:["rgb(255, 45, 45)","rgb(255, 255, 121)","#E6E6FA","#f88379","#9FE2BF","#89cff0"],hint:null}},methods:{makeMove(e){!this.gameOver&&this.isValidMove(e)?(this.placeTile(e),this.redPlayer=!this.redPlayer,this.redPlayer&&"Human"!=this.playerOneOption&&!this.gameOver?this.agentMove():this.redPlayer||"Human"==this.playerTwoOption||this.gameOver||this.agentMove()):this.restartWorker(),this.hint=null},restartWorker(){$.terminate(),$=new Worker("agent.js"),this.loading=!1},playerMove(e){this.boardUnlocked&&this.makeMove(e)},getHint(){let e=this.getValidMoves();console.log("this.player: "+this.player),console.log("this.otherPlayer: "+this.otherPlayer);let r=[e,(0,V.IU)(this.game),this.player,this.otherPlayer,5];$.postMessage(r),this.isLoading=!0,$.onmessage=e=>{this.hint=e.data,this.isLoading=!1}},resetGame(){this.redPlayer=!0,this.mostRecent[1]=-1,this.restartWorker(),this.game=[[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0]]},startOrRestart(){"Human"==this.playerOneOption||this.gameStarted?this.resetGame():this.agentMove(),this.hint=null},getValidMoves(){const e=[];for(let r=0;r<7;r++)this.board.some((e=>0===e[r]))&&e.push(r);return e},agentMove(){let e=this.getValidMoves(),r=[e,(0,V.IU)(this.game),this.player,this.otherPlayer,this.playerDepth];console.log("Starting up the worker..."),$.postMessage(r),this.isLoading=!0,$.onmessage=e=>{console.log("Agent worker chose move: "+e.data),this.makeMove(e.data),this.isLoading=!1}},placeTile(e){if(0==this.game[e][0]){let r=this.getRowForMove(e);this.mostRecent[0]=e,this.mostRecent[1]=r,this.game[e][r]=this.player}},isValidMove(e){return this.game[e].includes(0)},getRowForMove(e){return 0==this.game[e][5]?5:0==this.game[e][4]?4:0==this.game[e][3]?3:0==this.game[e][2]?2:0==this.game[e][1]?1:0==this.game[e][0]?0:void 0},isWinningState(e){const r=`${e}${e}${e}${e}`;function t(e){for(const t of e)if(t.join("").includes(r))return!0;return!1}function o(e){return t(e[0].map(((r,t)=>e.map((e=>e[t])))))}function i(e){for(let t of[null,e=>[...e].map((e=>e.reverse()))]){let o=t?t([...e]):[...e],i=o.map(((e,r)=>e[r])).map(Number);if(i.join("").includes(r))return!0;for(let t=1;t<=e[0].length-3;t++)for(let e of[t,-t]){let t=o.map(((r,t)=>r[t+e])).map(Number);if(t.join("").includes(r))return!0}}return!1}return t(this.board)||o(this.board)||i(this.board)}},computed:{player(){return this.gameOver?0:this.redPlayer?1:2},otherPlayer(){return this.redPlayer?2:1},playerDepth(){return this.redPlayer?this.playerOneLevel:this.playerTwoLevel},otherPlayerDepth(){return this.redPlayer?Number(this.playerTwoLevel):Number(this.playerOneLevel)},redWon(){return this.isWinningState(1)},yellowWon(){return this.isWinningState(2)},victoryText(){return this.redWon?"Player One wins!":this.yellowWon?"Player Two wins!":this.tied?"Cat's game!":""},gameStarted(){for(let e of this.game)if(e.includes(1)||e.includes(2))return!0;return!1},tied(){for(let e of this.game)if(e.includes(0))return!1;return!0},gameOver(){return this.redWon||this.yellowWon||this.tied},board(){return JSON.parse(JSON.stringify(this.game))},validateYellow(){return 2==this.player&&"Human"==this.playerTwoOption},validateRed(){return 1==this.player&&"Human"==this.playerOneOption},buttonDisabled(){return!this.gameStarted&&!this.aiStarts},aiStarts(){return"Human"!=this.playerOneOption},buttonText(){return this.aiStarts&&!this.gameStarted?"Start":"Restart"},boardUnlocked(){return!this.isLoading&&this.humanTurn},humanTurn(){return!this.gameStarted||(this.redPlayer?"Human"==this.playerOneOption:"Human"==this.playerTwoOption)},optionsDisabled(){return this.gameStarted&&!this.gameOver},green(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"rgb(56, 167, 126)":"#5df0ba"},border(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"#FFFFFF":"rgb(157, 157, 157)"},textColor(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"#FFFFFF":"black"},p1ColorOptions(){let e=JSON.parse(JSON.stringify(this.colorOptions));return e.filter((e=>e!==this.playerTwoColor))},p2ColorOptions(){let e=JSON.parse(JSON.stringify(this.colorOptions));return e.filter((e=>e!==this.playerOneColor))}}};const G=(0,M.Z)(q,[["render",C]]);var J=G,U=t(3636),E=t(9417),Y=t(1417);U.vI.add(E.EOp),U.vI.add(E.X8G),U.vI.add(Y.zhw);var z={name:"App",components:{ConnectFour:J,FontAwesomeIcon:P.GN}};const Z=(0,M.Z)(z,[["render",n]]);var K=Z;(0,o.ri)(K).mount("#app")}},r={};function t(o){var i=r[o];if(void 0!==i)return i.exports;var n=r[o]={exports:{}};return e[o].call(n.exports,n,n.exports,t),n.exports}t.m=e,function(){var e=[];t.O=function(r,o,i,n){if(!o){var a=1/0;for(c=0;c<e.length;c++){o=e[c][0],i=e[c][1],n=e[c][2];for(var l=!0,s=0;s<o.length;s++)(!1&n||a>=n)&&Object.keys(t.O).every((function(e){return t.O[e](o[s])}))?o.splice(s--,1):(l=!1,n<a&&(a=n));if(l){e.splice(c--,1);var p=i();void 0!==p&&(r=p)}}return r}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[o,i,n]}}(),function(){t.d=function(e,r){for(var o in r)t.o(r,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:r[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)}}(),function(){var e={143:0};t.O.j=function(r){return 0===e[r]};var r=function(r,o){var i,n,a=o[0],l=o[1],s=o[2],p=0;if(a.some((function(r){return 0!==e[r]}))){for(i in l)t.o(l,i)&&(t.m[i]=l[i]);if(s)var c=s(t)}for(r&&r(o);p<a.length;p++)n=a[p],t.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return t.O(c)},o=self["webpackChunkpyscript_vue"]=self["webpackChunkpyscript_vue"]||[];o.forEach(r.bind(null,0)),o.push=r.bind(null,o.push.bind(o))}();var o=t.O(void 0,[998],(function(){return t(3914)}));o=t.O(o)})();
//# sourceMappingURL=app.095deb6d.js.map